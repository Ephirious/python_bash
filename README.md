# Bash-оболочка для Linux
## Цель
- Освоить работу с файловой системой
- Научиться логировать и вести журнал команд

## Основные используемые библиотеки
- pathlib
- shutil
- tarfile
- zipfile

## Архитектура
### Модуль command_shell.py
#### Обязанности:
- Принимать пользовательский ввод и лексировать его на (команда, другие аргументы)
- Вызывать нужную команду, передавая ей аргументы
- Логировать ошибки, который происходят во время вызова команды
- Вести журнал команд
### Модуль command_factory.py
#### Обязанности:
- Создавать объект команды по указанному типу
### Модуль absract_commands.py
#### Обязанности:
- Абстрактный класс для класса Command\<type>
### Модуль lexer.py
#### Обязанности:
- Лексирует ввод пользоваться по правилам POSIX-систем, возвращая инкапсулированный ответ в виде класса InputArguments
### Модуль input_arguments.py
#### Обязанности:
- Инкапсуляция пользовательского ввода
### Модуль context.py
#### Обязанности:
- Хранение окружения оболочки
### Модуль logger
#### Обязанности:
- Инициализация логгера согласно пользовательским настройкам
- Логировать ошибки
- Выводить пользователю информацию на консоль
### Модуль option.py
#### Обязанности:
- Структурированное хранение информации об опциях для команд
### Модуль parsed_arguments.py
#### Обязанности:
- Хранения обработанных аргументов самой командой.
Аргументы делятся на 3 типа: позиционные аргументы; опции, не требующие аргумента; опции, требующие аргумент.
### Модуль parser.py
#### Обязанности:
- Разбивает строку аргументов, возвращая объект ParsedArguments
- Вызывает исключения, если аргументы для команды были записаны неправильно
## Реализованные команды
### Change directory: cd [path]
#### Описание:
Позволяет оболочке перемещать между директориями в файловой системе
#### Опции:
- -h --help - выводит список опций для данной команды
### List: ls [option]... [path]...
#### Описание:
Показывает содержимое директорий
#### Опции:
- -h --help - выводит список опций для данной команды
- -l --list - выводит длинный формат с подробным описание содержимого
- -a --all - выводит содержимое все файлы указанной директории
### Catenate: cat [path]...
#### Описание:
Выводит содержимое файла
#### Опции:
- -h --help - выводит список опций для данной команды
### Copy: cp [option]... [src]... [path]
#### Описание:
Копирует файлы или директории в указанную директорию
#### Опции:
- -h --help - выводит список опций для данной команды
- -r --recursive - позволяет копировать рекурсивно директории
### Move: mv [src]... [dest]
#### Описание:
Перемещает файлы или директории из src в dest.
Переименовывает файл или директорию, если было введено 2 аргумента, а последний - новое имя
#### Опции:
- -h --help - выводит список опций для данной команды
### Remove: rm [option]... [path]...
#### Описание:
Удаляет указанные файлы
Для удаления каталога требуется указать опцию -r
#### Опции:
- -h --help - выводит список опций для данной команды
- -r --recursive - позволяет рекурсивно удалять директории
### GREP: grep [option]... [path]...
#### Описание:
Поиск в файле по указанному паттерну. Выводит номер найденной строки и саму строку
Для указывания паттерна, требуется написать -p (--pattern) 'pattern'
#### Опции:
- -h --help - выводит список опций для данной команды
- -p --pattern - указание паттерна для поиска
- -i --ignore-case - игнорирование регистра
- -r --recursive - рекурсивный поиск в директории
### TAR: tar [option]... [path]...
#### Описание:
Архивирует указанные файлы. Для архивации необходимо указать опцию -c (--create), указав имя архива через опцию -f (--file) 'name', после указать файлы для архивации
Для разархивации файлов требуется указать опцию -x (--extract), после необходимо указать -f (--file) 'name'.
#### Опции:
- -h --help - выводит список опций для данной команды
- -f --file - указать имя архива
- -c --create - создать архив
- -x --extract - разархивировать архив
### ZIP: zip [option]... [path]...
#### Описание:
Архивирует указанные файлы. Для архивации необходимо указать опцию -c (--create), указав имя архива через опцию -f (--file) 'name', после указать файлы для архивации
Для разархивации файлов требуется указать опцию -x (--extract), после необходимо указать -f (--file) 'name'.
#### Опции:
- -h --help - выводит список опций для данной команды
- -f --file - указать имя архива
- -c --create - создать архив
- -x --extract - разархивировать архив
### History: history [option]...
#### Описание:
Показывает последние введённые команды. Для получения последний N команд требуется указать опцию -n 'number'
#### Опции:
- -h --help - выводит список опций для данной команд
- -n --number - выводит последние N команд
### Undo: undo
#### Описание:
Отменяет последнюю введённую команду rm, cp, mv
#### Опции:
- -h --help - выводит список опций для данной команды

## Исключения 
- ShellException
  - Исключения, относящиеся к ошибкам парсинга:
    - UnknownOptionException
    - InvalidRequiredOptionPositionException
    - ParseUnexpectedArgumentException
    - NotArgumentForOptionException
    - OptionRepeatException
    - ParseInvalidPositionException
  - Исключения, относящиеся к ошибкам работы команд
    - UnexpectedArgumentsException
    - NotEnoughArgumentsException
    - NotTypeFileException
    - NotTypeDirectoryException
    - NotEnoughOptionException
    - NotAccessToReadException
    - NotAccessToWriteException
    - NotEnoughPermissionToRemoveException
    - InvalidArgumentsException
  - Исключения, относящиеся к ошибкам работы фабрики команда
    - UnknownCommand
  - Исключения, относящиеся к ошибкам работы класса PathUtils
    - InvalidPathException

## Инструкция по использованию
Находясь в корне каталога
```shell
pytest -q
```
После успешного прохождения всех тестов, запускаем программу
```shell
python -m src.main
```
Для завершения работы программы, напишите команду 'exit' в нижнем регистре
## Итоги
- Были изучены основы работы с файловой системой с помощью средств Python
- Освоены тонкости работ команд (например, учёт прав доступа при выполнении копирования)